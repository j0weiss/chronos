<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chronos</title>
</head>
<body>
<header>
  <h1>Chronos</h1>
</header>
<section>
  <div id="timer"></div>
  <button id="start-timer">Start</button>
  <button id="stop-timer">Stop</button>
</section>
<script>
const REMAINING_MILLISECONDS = 3*60*1000;
let timer = null;

function startTimer() {
  const end = Date.now() + REMAINING_MILLISECONDS;
  timer = setInterval(countdown, 1000, end);
  renderRemainingTime(REMAINING_MILLISECONDS);
}

function stopTimer() {
  clearInterval(timer);
}

function countdown(endTimePoint) {
  const now = Date.now();
  renderRemainingTime(endTimePoint - now);
}

function renderRemainingTime(milliseconds) {
  const minutes = Math.floor(( milliseconds / 1000 ) / 60);
  const seconds = Math.ceil(( milliseconds / 1000 ) % 60) % 60;

  const minutesString = minutes < 10 ? '0' + minutes : minutes;
  const secondsString = seconds < 10 ? '0' + seconds : seconds;

  document.querySelector('#timer').innerHTML = minutesString + ':' + secondsString;
}

function registerEvents() {
  document.querySelector('#start-timer').addEventListener('click', startTimer);
  document.querySelector('#stop-timer').addEventListener('click', stopTimer);
}

window.addEventListener('load', () => {
  registerEvents();
  renderRemainingTime(timerMilliseconds);
});
</script>
</body>
</html>